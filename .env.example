# ===========================================
# Code Embedding AI Pipeline - Configuration
# ===========================================
# Copy this file to .env and fill in your values

# --------------------------
# Jina AI API Configuration (Optional if using local model)
# --------------------------
JINA_API_KEY=your_jina_api_key_here
JINA_API_URL=https://api.jina.ai/v1/embeddings

# --------------------------
# Embedding Configuration
# --------------------------
# Use local embedding model (default: true, set to false to use Jina API)
USE_LOCAL_EMBEDDING_MODEL=true
# Model name - use HuggingFace model ID for local, or API model name for remote
# Local example: jinaai/jina-code-embeddings-1.5b
# API example: jina-code-embeddings-1.5b
EMBEDDING_MODEL=jinaai/jina-code-embeddings-1.5b
# Vector dimensions (must match model output: jina-code-1.5b = 1536)
EMBEDDING_DIMENSIONS=1536
# Number of texts to send per API call (recommended: 8-20)
EMBEDDING_BATCH_SIZE=8
# Maximum concurrent API requests
MAX_CONCURRENT_EMBEDDINGS=5
# API timeout in seconds
EMBEDDING_TIMEOUT=60
# Enable in-memory embedding cache
ENABLE_EMBEDDING_CACHE=true

# --------------------------
# ChromaDB Configuration
# --------------------------
CHROMADB_HOST=localhost
CHROMADB_PORT=8000
CHROMADB_COLLECTION_NAME=code_embeddings
# Enable persistent storage
CHROMADB_PERSISTENT=true
# Directory for persistent storage
CHROMADB_PERSIST_DIR=./chroma_db
# Batch size for database operations
CHROMADB_BATCH_SIZE=100

# --------------------------
# Parser Configuration
# --------------------------
# Minimum tokens per chunk
CHUNK_MIN_TOKENS=50
# Maximum tokens per chunk
CHUNK_MAX_TOKENS=500
# Overlap between chunks
CHUNK_OVERLAP_TOKENS=20
# Include code comments in chunks
INCLUDE_COMMENTS=false
# File extensions to process
SUPPORTED_EXTENSIONS=.java,.kt,.html,.xml,.properties,.yml,.yaml,.py

# --------------------------
# Security Configuration
# --------------------------
# Enable secret detection and masking
ENABLE_SECRET_SCANNING=true
# Preserve code syntax when masking
PRESERVE_SYNTAX=true
# Sensitivity threshold (0.0-1.0)
SENSITIVITY_THRESHOLD=0.7
# Scan comments for secrets
SCAN_COMMENTS=true
# Scan string literals for secrets
SCAN_STRINGS=true

# --------------------------
# Repository Configuration
# --------------------------
# Default repository path
REPO_PATH=./target_repo

# --------------------------
# Update Service Configuration
# --------------------------
# Directory for update state files
UPDATE_STATE_DIR=./update_state
# Check interval in seconds
UPDATE_CHECK_INTERVAL=300
# Maximum concurrent update operations
MAX_CONCURRENT_UPDATES=3
# Enable file system watching
ENABLE_FILE_WATCHING=false
# Force full update after N hours
FORCE_UPDATE_THRESHOLD_HOURS=24

# --------------------------
# Logging Configuration
# --------------------------
# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO
# Directory for log files
LOG_DIR=./logs
# Number of days to retain log files
LOG_RETENTION_DAYS=30
